# Pipeline Architecture: AI Models Strategy

## ğŸ“Š ĞĞ±Ğ·Ğ¾Ñ€ Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     S3 Storage (Beget)                       â”‚
â”‚              17 ĞºĞ½Ğ¸Ğ³ (PDF/DOCX/PPTX/XLSX)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent A: Document Extractor                                  â”‚
â”‚ âš ï¸ AI MODEL Ğ´Ğ»Ñ repair-mode (OCR/cleaning)                  â”‚
â”‚ Tools: markitdown, openpyxl, mammoth                         â”‚
â”‚ Output: manifest.json + blocks.jsonl â† Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ˜Ğ ĞĞ’ĞĞĞĞ«Ğ™    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent B: Outline Builder                                     â”‚
â”‚ âœ… AI MODEL ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ (GigaChat Pro)                         â”‚
â”‚ Input: blocks.jsonl â† Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ˜Ğ ĞĞ’ĞĞĞĞ«Ğ™ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚       â”‚
â”‚ Strategy: Map-Reduce Ğ¿Ğ¾ Ğ³Ğ»Ğ°Ğ²Ğ°Ğ¼ (Ğ½Ğµ Ğ¿Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¼)              â”‚
â”‚ Tasks:                                                        â”‚
â”‚  - ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° (LLM)                                 â”‚
â”‚  - Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ stages/tools/indicators/rules (LLM)            â”‚
â”‚  - ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ (LLM)                           â”‚
â”‚  - Ğ¡Ğ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ glossary (LLM + matching)                 â”‚
â”‚                                                              â”‚
â”‚ Output: outline.yaml                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent C: Compiler                                            â”‚
â”‚ âœ… AI MODEL (GigaChat Lite) Ğ´Ğ»Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²                    â”‚
â”‚ Input: outline.yaml                                          â”‚
â”‚ Tasks:                                                        â”‚
â”‚  - Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ markdown Ğ¿Ğ¾ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°Ğ¼                            â”‚
â”‚  - Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ YAML ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€                                  â”‚
â”‚  - Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ²                                   â”‚
â”‚                                                              â”‚
â”‚ Output: docs/methodologies/<id>/*.md                         â”‚
â”‚         data/methodologies/<id>.yaml                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent D: QA Reviewer                                         â”‚
â”‚ âœ… AI MODEL (Claude 3.5 Sonnet) Ğ´Ğ»Ñ reasoning               â”‚
â”‚ Input: outline.yaml + docs/                                  â”‚
â”‚ Tasks:                                                        â”‚
â”‚  - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ ÑĞ²ÑĞ·Ğ½Ğ¾ÑÑ‚Ğ¸                             â”‚
â”‚  - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ glossary terms                                  â”‚
â”‚  - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ» Ğ½Ğ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ                           â”‚
â”‚  - ĞÑ†ĞµĞ½ĞºĞ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ‚Ñ‹ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸                                â”‚
â”‚                                                              â”‚
â”‚ Output: qa_report.md + approved: true/false                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent E: Graph DB Publisher                                  â”‚
â”‚ âŒ NO AI MODEL (pure data transformation)                    â”‚
â”‚ Tools: python-arango, AQL queries                            â”‚
â”‚ Tasks:                                                        â”‚
â”‚  - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ vertices: Methodology, Stage, Tool, Indicator    â”‚
â”‚  - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ edges: has_stage, uses_tool, measures           â”‚
â”‚  - Ğ¡Ğ²ÑĞ·Ğ¸ Ñ glossary: references_term                         â”‚
â”‚  - Ğ¡Ğ²ÑĞ·Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸ÑĞ¼Ğ¸: related_to                     â”‚
â”‚                                                              â”‚
â”‚ Input: outline.yaml + qa_report.md                           â”‚
â”‚ Output: ArangoDB collections (methodologies, glossary)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent F: PR Publisher                                        â”‚
â”‚ âŒ NO AI MODEL (pure automation)                             â”‚
â”‚ Tools: GitHub API, git                                       â”‚
â”‚ Output: GitHub Pull Request                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

### Agent A: Document Extractor
**AI Model:** âš ï¸ **ĞĞ£Ğ–ĞĞ Ğ´Ğ»Ñ repair-mode**

**ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°:** âŒ Ğ‘Ğ•Ğ— AI (markitdown, openpyxl)
**Repair-mode:** âœ… AI Ğ´Ğ»Ñ OCR/cleaning Ğ¿Ñ€Ğ¸ Ğ½Ğ¸Ğ·ĞºĞ¾Ğ¼ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğµ

**Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
```
sources/<book_id>/
â”œâ”€â”€ manifest.json              # ĞŸĞ°ÑĞ¿Ğ¾Ñ€Ñ‚ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° (score 0-100)
â”œâ”€â”€ extracted/
â”‚   â”œâ”€â”€ blocks.jsonl          # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ»Ñ Agent B
â”‚   â”œâ”€â”€ full_text.md          # Ğ”Ğ»Ñ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°
â”‚   â””â”€â”€ tables/*.csv          # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
â””â”€â”€ raw/original.<ext>        # Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ğ¸Ğº
```

**ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° (manifest.json):**
- `score` (0-100): ĞĞ±Ñ‰Ğ°Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ°
- `text_density`: Ğ”Ğ¾Ğ»Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† Ñ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼
- `garbage_ratio`: Ğ”Ğ¾Ğ»Ñ Ğ¼ÑƒÑĞ¾Ñ€Ğ½Ñ‹Ñ… ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
- `repeated_lines_ratio`: ĞšĞ¾Ğ»Ğ¾Ğ½Ñ‚Ğ¸Ñ‚ÑƒĞ»Ñ‹/Ğ´ÑƒĞ±Ğ»Ğ¸
- `table_extract_coverage`: % Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†

**Routing logic:**
- `score >= 80` â†’ âœ… ok_for_outline (Ğ¸Ğ´ĞµÑ‚ Ğ² Agent B)
- `60-79` â†’ âš ï¸ ok_with_warnings (ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ chunk size)
- `< 60` â†’ âŒ needs_repair (OCR Ğ¸Ğ»Ğ¸ AI-clean)

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ÑĞºÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚, âš ï¸ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°

---

### Agent B: Outline Builder
**AI Model:** âœ… **ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ**

**Ğ’Ñ…Ğ¾Ğ´:** `sources/<book_id>/extracted/blocks.jsonl` + `manifest.json`
**Ğ’Ñ‹Ñ…Ğ¾Ğ´:** `work/<book_id>/outline.yaml`

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‰Ğ¸Ğµ LLM:**
1. **ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°** - Ğ Ñ‡ĞµĞ¼ ĞºĞ½Ğ¸Ğ³Ğ°, Ñ‚Ğ¸Ğ¿ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸
2. **Map-Reduce Ğ¿Ğ¾ Ğ³Ğ»Ğ°Ğ²Ğ°Ğ¼:**
   - Map: Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ stages/tools/indicators/rules Ğ¸Ğ· ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ³Ğ»Ğ°Ğ²Ñ‹
   - Reduce: ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ² ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ outline, ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ´ÑƒĞ±Ğ»Ğ¸
3. **ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:** diagnostic/planning/analysis/standard
4. **Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²** Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼Ğ¸ + glossary matching
5. **Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ rules:** condition â†’ action
6. **Ğ¡Ğ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ glossary** (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ + AI)

**Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸:**
```python
# Map-Reduce Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

# 1. Map: ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ğ¾ Ğ³Ğ»Ğ°Ğ²Ğ°Ğ¼ (chunking Ğ¿Ğ¾ structure)
for chapter in extract_chapters_from_blocks(blocks_jsonl):
    chapter_analysis = llm.chat(f"""
    Ğ“Ğ»Ğ°Ğ²Ğ°: {chapter['title']}
    ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚: {chapter['blocks']}
    
    Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ¸:
    - stages (ÑÑ‚Ğ°Ğ¿Ñ‹): [{title, description, order}]
    - tools (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹): [{title, type, description}]
    - indicators (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸): [{name, formula, glossary_ref}]
    - rules (Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°): [{condition, action, severity}]
    
    Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ glossary: {glossary_terms}
    Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚: JSON
    """)
    
# 2. Reduce: Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° outline
outline = reduce_chapters(
    all_analyses,
    remove_duplicates=True,
    link_to_glossary=True,
    validate_formulas=True
)
```

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âš ï¸ Skeleton Ğ³Ğ¾Ñ‚Ğ¾Ğ², Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ GigaChat

---

### Agent C: Compiler
**AI Model:** âœ… ĞÑƒĞ¶Ğ½Ğ° (Ğ»ĞµĞ³ĞºĞ°Ñ)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ markdown Ğ¿Ğ¾ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°Ğ¼
- ĞŸĞµÑ€ĞµÑ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ°
- Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ YAML ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸:**

| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | Ğ¦ĞµĞ½Ğ° | ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ | Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ |
|--------|----------|------|----------|--------------|
| **GigaChat Lite** | âš¡âš¡âš¡ Fast | ğŸ’° Cheap | â­â­â­ | **BEST Ğ´Ğ»Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²** |
| GPT-4o-mini | âš¡âš¡ Fast | ğŸ’° Cheap | â­â­â­â­ | Good alternative |
| Claude 3 Haiku | âš¡âš¡âš¡ Fastest | ğŸ’° Cheap | â­â­â­ | Fastest option |

**Ğ’Ñ‹Ğ±Ğ¾Ñ€:** ğŸ¯ **GigaChat Lite**
- âœ… Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ
- âœ… Ğ”ĞµÑˆĞµĞ²Ğ°Ñ
- âœ… Ğ”Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âŒ ĞĞµ Ğ½Ğ°Ñ‡Ğ°Ñ‚

---

### Agent D: QA Reviewer
**AI Model:** âœ… **ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ** (Ğ½ÑƒĞ¶Ğ½Ğ° Ğ»ÑƒÑ‡ÑˆĞ°Ñ)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ ÑĞ²ÑĞ·Ğ½Ğ¾ÑÑ‚Ğ¸
- ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ» Ğ½Ğ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ
- ĞÑ†ĞµĞ½ĞºĞ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ‚Ñ‹
- Critical thinking

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸:**

| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | Reasoning | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ¦ĞµĞ½Ğ° | Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ |
|--------|-----------|-------------|------|--------------|
| **Claude 3.5 Sonnet** | â­â­â­â­â­ | Excellent | ğŸ’°ğŸ’° | **BEST reasoning** |
| GPT-4o | â­â­â­â­ | Very Good | ğŸ’°ğŸ’° | Good alternative |
| GigaChat Pro | â­â­â­ | Good | ğŸ’° | Cheaper option |

**Ğ’Ñ‹Ğ±Ğ¾Ñ€:** ğŸ¯ **Claude 3.5 Sonnet**
- âœ… Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ reasoning
- âœ… Ğ—Ğ°Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ½ĞºĞ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
- âœ… Ğ¥Ğ¾Ñ€Ğ¾Ñˆ Ğ² ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¼ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğµ

**Fallback:** GigaChat Pro (ĞµÑĞ»Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½)

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âŒ ĞĞµ Ğ½Ğ°Ñ‡Ğ°Ñ‚

---

### Agent E: Graph DB Publisher
**AI Model:** âŒ ĞĞ• ĞĞ£Ğ–ĞĞ

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
1. **ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ outline.yaml â†’ ArangoDB collections**
2. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ vertices:**
   - `methodologies` - Ğ¡Ğ°Ğ¼Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸
   - `stages` - Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹
   - `tools` - Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ (ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)
   - `indicators` - ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸ Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼Ğ¸
   - `rules` - ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ¸Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹
   - `glossary` - Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹ (ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚)
3. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ edges:**
   - `has_stage` - Methodology â†’ Stage
   - `has_substage` - Stage â†’ Stage
   - `uses_tool` - Stage â†’ Tool
   - `measures` - Stage â†’ Indicator
   - `applies_rule` - Stage â†’ Rule
   - `references_term` - Ğ»ÑĞ±Ğ¾Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ â†’ Glossary Term
   - `related_to` - Methodology â†’ Methodology

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸:**
```python
# outline.yaml â†’ ArangoDB
from arango import ArangoClient

# 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ vertex: Methodology
methodology_doc = {
    "_key": "pbu-1-2008",
    "title": "ĞŸĞ‘Ğ£ 1/2008 Ğ£Ñ‡ĞµÑ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°",
    "type": "regulatory",
    "category": "accounting_standard",
    "source_book": "pbu-1-2008.pdf",
    "created_at": "2025-12-13T15:00:00Z"
}

# 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ vertices: Stages
stage_doc = {
    "_key": "pbu-1-2008_stage_001",
    "methodology_id": "pbu-1-2008",
    "title": "Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸",
    "order": 1,
    "description": "Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¾Ğ² Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ ÑƒÑ‡ĞµÑ‚Ğ°"
}

# 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ edge: has_stage
edge_doc = {
    "_from": "methodologies/pbu-1-2008",
    "_to": "stages/pbu-1-2008_stage_001",
    "order": 1
}

# 4. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ edge: references_term
edge_glossary = {
    "_from": "stages/pbu-1-2008_stage_001",
    "_to": "glossary/ÑƒÑ‡ĞµÑ‚Ğ½Ğ°Ñ_Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°",
    "context": "Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸",
    "page": 3
}
```

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ‘Ğ” (Collections):**
```
Vertices:
â”œâ”€â”€ methodologies      (Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸)
â”œâ”€â”€ stages            (ÑÑ‚Ğ°Ğ¿Ñ‹)
â”œâ”€â”€ tools             (Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹)
â”œâ”€â”€ indicators        (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸)
â”œâ”€â”€ rules             (Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°)
â””â”€â”€ glossary          (Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹ - ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ)

Edges:
â”œâ”€â”€ has_stage         (Methodology â†’ Stage)
â”œâ”€â”€ has_substage      (Stage â†’ Stage)
â”œâ”€â”€ uses_tool         (Stage â†’ Tool)
â”œâ”€â”€ measures          (Stage â†’ Indicator)
â”œâ”€â”€ applies_rule      (Stage â†’ Rule)
â”œâ”€â”€ references_term   (any â†’ Glossary)
â””â”€â”€ related_to        (Methodology â†’ Methodology)
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ³Ñ€Ğ°Ñ„Ğ¾Ğ²Ğ°Ñ Ğ‘Ğ”:**
- âœ… Ğ¡Ğ²ÑĞ·Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸ÑĞ¼Ğ¸ (related_to)
- âœ… ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ glossary (ĞºĞ°ĞºĞ¸Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½?)
- âœ… Ğ“Ñ€Ğ°Ñ„ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ (ĞºĞ°ĞºĞ¸Ğµ ÑÑ‚Ğ°Ğ¿Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ ÑÑ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚?)
- âœ… Traversal queries Ğ´Ğ»Ñ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹
- âœ… Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ²ÑĞ·ĞµĞ¹

**Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹:**
- python-arango (SDK)
- AQL (query language)
- Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ°Ñ Ğ‘Ğ” Ğ¸Ğ· `/home/leval907/cleaning_finance_app`

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âŒ ĞĞµ Ğ½Ğ°Ñ‡Ğ°Ñ‚

---

### Agent F: PR Publisher
**AI Model:** âŒ ĞĞ• ĞĞ£Ğ–ĞĞ

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ GitHub Pull Request
- ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² docs/ Ğ¸ data/
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ reviewers
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ PR

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ:**
- Ğ§Ğ¸ÑÑ‚Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- GitHub API
- ĞĞµÑ‚ ĞºÑ€ĞµĞ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âŒ ĞĞµ Ğ½Ğ°Ñ‡Ğ°Ñ‚

---

## ğŸ“¦ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸

### blocks.jsonl (Agent A â†’ Agent B)
Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸. **ĞĞ´Ğ¸Ğ½ Ğ±Ğ»Ğ¾Ğº = Ğ¾Ğ´Ğ½Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ° JSON.**

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```json
{"id": "block_001", "type": "heading", "text": "Ğ“Ğ»Ğ°Ğ²Ğ° 1. ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ»Ğ¸ĞºĞ²Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸", "source": {"page": 15, "bbox": [100, 200, 500, 220]}, "meta": {"level": 1}}
{"id": "block_002", "type": "paragraph", "text": "Ğ›Ğ¸ĞºĞ²Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ÑÑ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¿Ğ¾Ğ³Ğ°ÑĞ¸Ñ‚ÑŒ ĞºÑ€Ğ°Ñ‚ĞºĞ¾ÑÑ€Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ°.", "source": {"page": 15}, "meta": {}}
{"id": "block_003", "type": "formula", "text": "Current Ratio = Current Assets / Current Liabilities", "source": {"page": 16}, "meta": {"variables": ["Current Assets", "Current Liabilities"]}}
{"id": "block_004", "type": "table", "text": "| ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ | 2022 | 2023 |\n|---|---|---|\n| Ğ’Ñ‹Ñ€ÑƒÑ‡ĞºĞ° | 1000 | 1200 |", "source": {"page": 17, "table_id": "tbl_001"}, "meta": {"rows": 10, "cols": 3}}
{"id": "block_005", "type": "list", "text": "1. Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ\n2. Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸\n3. ĞŸÑ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·", "source": {"page": 18}, "meta": {"ordered": true, "items": 3}}
```

**Block types:**
- `heading` - Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸ (meta.level: 1-6)
- `paragraph` - ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚
- `list` - Ğ¡Ğ¿Ğ¸ÑĞºĞ¸ (meta.ordered, meta.items)
- `table` - Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ (meta: rows, cols)
- `formula` - Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, ÑƒÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ (meta.variables)
- `figure` - ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- `page_break` - Ğ Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ blocks.jsonl?**
- âœ… Ğ›ĞµĞ³ĞºĞ¾ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾Ñ‡Ğ½Ğ¾ (Ğ½Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Ğ²ÑÑ ĞºĞ½Ğ¸Ğ³Ñƒ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ)
- âœ… Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ chunking Ğ¿Ğ¾ heading (Ğ½Ğµ Ğ»Ğ¾Ğ¼Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚)
- âœ… Ğ§ĞµÑ‚ĞºĞ°Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ»Ğ¾ĞºĞ¾Ğ² (Agent B Ğ·Ğ½Ğ°ĞµÑ‚ Ñ‡Ñ‚Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ)
- âœ… ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹, ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹)

---

### manifest.json (Agent A â†’ Router)
ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğµ ÑĞºÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ğ¸. **ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ routing: ok/warnings/repair.**

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:**
```json
{
  "book_id": "accounting-basics",
  "extraction_date": "2025-01-29T14:30:00Z",
  "agent": "Agent A v1.0",
  "source": {
    "filename": "accounting-basics.pdf",
    "format": "PDF",
    "pages": 150,
    "size_bytes": 2456789,
    "hash_sha256": "abc123..."
  },
  "quality": {
    "score": 85,
    "text_density": 0.92,
    "garbage_ratio": 0.03,
    "repeated_lines_ratio": 0.05,
    "table_extract_coverage": 0.95
  },
  "routing": {
    "ok_for_outline": true,
    "ok_with_warnings": false,
    "needs_repair": false
  },
  "warnings": [],
  "statistics": {
    "total_blocks": 1245,
    "blocks_by_type": {
      "heading": 45,
      "paragraph": 980,
      "table": 35,
      "formula": 120,
      "list": 65
    }
  }
}
```

**Quality Metrics:**

```python
# Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ğ¾Ñ†ĞµĞ½ĞºĞ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° (0-100)
score = 100 \
    - garbage_ratio * 200 \          # Ğ¼ÑƒÑĞ¾Ñ€Ğ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ (ÑˆÑ‚Ñ€Ğ°Ñ„ x2)
    - repeated_lines_ratio * 100 \   # ĞºĞ¾Ğ»Ğ¾Ğ½Ñ‚Ğ¸Ñ‚ÑƒĞ»Ñ‹, Ğ´ÑƒĞ±Ğ»Ğ¸
    - (1 - text_density) * 80 \      # Ğ¿ÑƒÑÑ‚Ñ‹Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
    - (1 - table_extract_coverage) * 40  # Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†

# ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸:
text_density = (ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ñ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼) / (Ğ²ÑĞµĞ³Ğ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†)
garbage_ratio = (ÑĞ¿ĞµÑ†ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹, Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ğ¼ÑƒÑĞ¾Ñ€) / (Ğ²ÑĞµĞ³Ğ¾ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²)
repeated_lines_ratio = (Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ¸ĞµÑÑ ÑÑ‚Ñ€Ğ¾ĞºĞ¸) / (Ğ²ÑĞµĞ³Ğ¾ ÑÑ‚Ñ€Ğ¾Ğº)
table_extract_coverage = (Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¾ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†) / (Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†)
```

**Routing Logic:**
- `score >= 80` â†’ âœ… **ok_for_outline** (ÑÑ€Ğ°Ğ·Ñƒ Ğ² Agent B)
- `60 <= score < 80` â†’ âš ï¸ **ok_with_warnings** (Agent B Ñ Ğ¾ÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒÑ, Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ğ¹ chunk size)
- `score < 60` â†’ âŒ **needs_repair** (OCR/AI-clean/manual review)

---

### outline.yaml (Agent B â†’ Agent C)
Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ. **ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚ pipeline.**

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ (regulatory document ĞŸĞ‘Ğ£ 1/2008):**
```yaml
metadata:
  book_id: pbu-1-2008
  title: "ĞŸĞ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ±ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€ÑĞºĞ¾Ğ¼Ñƒ ÑƒÑ‡ĞµÑ‚Ñƒ Â«Ğ£Ñ‡ĞµÑ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸Â» ĞŸĞ‘Ğ£ 1/2008"
  type: regulatory
  category: accounting_standard
  source_pages: [1, 15]
  created_at: "2025-01-29T15:00:00Z"
  agent: "Agent B v1.0"

classification:
  methodology_type: standard
  domain: accounting
  regulatory_level: national
  effective_date: "2008-10-06"

structure:
  stages:
    - id: stage_001
      title: "Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸"
      order: 1
      description: "Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¾Ğ² Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ Ğ±ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€ÑĞºĞ¾Ğ³Ğ¾ ÑƒÑ‡ĞµÑ‚Ğ°"
      pages: [3, 5]
      glossary_terms: ["ÑƒÑ‡ĞµÑ‚Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°", "ÑĞ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ ÑƒÑ‡ĞµÑ‚Ğ°"]
      substages:
        - "Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² Ğ¾Ñ†ĞµĞ½ĞºĞ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ²"
        - "Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¾Ğ² Ğ°Ğ¼Ğ¾Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸"
        - "Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞ³Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ğ° ÑÑ‡ĞµÑ‚Ğ¾Ğ²"
    
    - id: stage_002
      title: "Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸"
      order: 2
      description: "ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ² Ğ±ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€ÑĞºĞ¾Ğ¹ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸"
      pages: [6, 8]
      glossary_terms: ["Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸"]

  tools:
    - id: tool_001
      title: "ĞŸÑ€Ğ¸ĞºĞ°Ğ· Ğ¾Ğ± ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞµ"
      type: document_template
      description: "Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¾Ğ² ÑƒÑ‡ĞµÑ‚Ğ°"
      template_available: true
      pages: [10]
    
    - id: tool_002
      title: "Ğ Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ğ½ ÑÑ‡ĞµÑ‚Ğ¾Ğ²"
      type: chart
      description: "ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ ÑÑ‡ĞµÑ‚Ğ¾Ğ² Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸"
      pages: [11, 12]

  indicators:
    - id: ind_001
      title: "Ğ¡Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
      type: parameter
      description: "Ğ”Ğ»Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ğ°Ğ¼Ğ¾Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ñ… ÑÑ€ĞµĞ´ÑÑ‚Ğ²"
      pages: [7]
      criteria:
        - "ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ ÑÑ€Ğ¾Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
        - "ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ·Ğ½Ğ¾Ñ"

  rules:
    - id: rule_001
      title: "Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸"
      type: mandatory
      description: "Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ²Ğ²Ğ¾Ğ´ÑÑ‚ÑÑ Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ³Ğ¾Ğ´Ğ°"
      pages: [9]
      severity: high
      details:
        condition: "Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ° Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ ÑƒÑ‡ĞµÑ‚Ğ°"
        action: "Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼"

glossary_references:
  found_terms:
    - term_id: ÑƒÑ‡ĞµÑ‚Ğ½Ğ°Ñ_Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
      occurrences: 15
      pages: [3, 4, 5, 6, 9]
    - term_id: Ğ°Ğ¼Ğ¾Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
      occurrences: 8
      pages: [7, 8]
  
  missing_terms: []  # Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹ Ğ½Ğµ Ğ¸Ğ· glossary

examples:
  - title: "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸"
    description: "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸ĞºĞ°Ğ· Ğ¾Ğ± ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞµ"
    pages: [13, 14]

control_questions:
  - "ĞšĞ°ĞºĞ¸Ğµ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¾Ñ†ĞµĞ½ĞºĞ¸ Ğ·Ğ°Ğ¿Ğ°ÑĞ¾Ğ² Ğ¿Ñ€ĞµĞ´ÑƒÑĞ¼Ğ¾Ñ‚Ñ€ĞµĞ½Ñ‹?"
  - "ĞšĞ¾Ğ³Ğ´Ğ° Ğ²Ğ²Ğ¾Ğ´ÑÑ‚ÑÑ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑƒÑ‡ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸?"

related_methodologies:
  - pbu-4-1999  # Ğ‘ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€ÑĞºĞ°Ñ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ
  - pbu-6-2001  # Ğ£Ñ‡ĞµÑ‚ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ñ… ÑÑ€ĞµĞ´ÑÑ‚Ğ²

ai_training:
  model: "GigaChat Pro"
  chunks_processed: 3
  confidence: 0.92
  processing_time_sec: 45
```

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° outline:**
- `metadata` - ĞŸĞ°ÑĞ¿Ğ¾Ñ€Ñ‚ ĞºĞ½Ğ¸Ğ³Ğ¸
- `classification` - Ğ¢Ğ¸Ğ¿ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ (diagnostic/planning/analysis/standard)
- `structure` - ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ:
  * `stages` - Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ (Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ²Ğ°Ğ¶ĞµĞ½)
  * `tools` - Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ (ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹, Ñ‡ĞµĞº-Ğ»Ğ¸ÑÑ‚Ñ‹)
  * `indicators` - ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸ Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼Ğ¸
  * `rules` - ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ¸Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ (condition â†’ action)
- `glossary_references` - Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ³Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸ĞµĞ¼
- `examples` - ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸Ğ· ĞºĞ½Ğ¸Ğ³Ğ¸
- `control_questions` - Ğ”Ğ»Ñ Agent D
- `related_methodologies` - Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸
- `ai_training` - ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ YAML?**
- âœ… Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ (Ğ´Ğ»Ñ review)
- âœ… ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ²
- âœ… Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
- âœ… Ğ›ĞµĞ³ĞºĞ¾ Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ÑÑ Ğ² Python (PyYAML)

---

## ğŸ’° Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ 1 ĞºĞ½Ğ¸Ğ³Ğ¸

### GigaChat ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)

| ĞĞ³ĞµĞ½Ñ‚ | ĞœĞ¾Ğ´ĞµĞ»ÑŒ | Ğ¢Ğ¾ĞºĞµĞ½Ğ¾Ğ² | Ğ¦ĞµĞ½Ğ°/ĞºĞ½Ğ¸Ğ³Ğ° | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|-------|--------|---------|------------|------------|
| Agent A | - | 0 | â‚½0 | Ğ‘ĞµĞ· AI (markitdown) |
| Agent B | GigaChat Pro | ~50K | â‚½15-30 | Map-Reduce Ğ¿Ğ¾ Ğ³Ğ»Ğ°Ğ²Ğ°Ğ¼ |
| Agent C | GigaChat Lite | ~10K | â‚½2-5 | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ |
| Agent D | GigaChat Pro | ~20K | â‚½6-12 | QA Review |
| Agent E | - | 0 | â‚½0 | Ğ‘ĞµĞ· AI (ArangoDB) |
| Agent F | - | 0 | â‚½0 | Ğ‘ĞµĞ· AI (GitHub API) |
| **Ğ˜Ğ¢ĞĞ“Ğ** | | **~80K** | **â‚½25-50** | Ğ—Ğ° ĞºĞ½Ğ¸Ğ³Ñƒ |

**17 ĞºĞ½Ğ¸Ğ³:** ~â‚½425-850

### Ğ—Ğ°Ğ¿Ğ°Ğ´Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (Ğ´Ğ¾Ñ€Ğ¾Ğ¶Ğµ)

| ĞĞ³ĞµĞ½Ñ‚ | ĞœĞ¾Ğ´ĞµĞ»ÑŒ | Ğ¢Ğ¾ĞºĞµĞ½Ğ¾Ğ² | Ğ¦ĞµĞ½Ğ°/ĞºĞ½Ğ¸Ğ³Ğ° |
|-------|--------|---------|------------|
| Agent B | Claude 3.5 Sonnet | ~50K | $1.50 (~â‚½150) |
| Agent C | Claude 3 Haiku | ~10K | $0.05 (~â‚½5) |
| Agent D | Claude 3.5 Sonnet | ~20K | $0.60 (~â‚½60) |
| Agent E | - | 0 | $0 |
| Agent F | - | 0 | $0 |
| Agent D | Claude 3.5 Sonnet | ~20K | $0.60 (~â‚½60) |
| **Ğ˜Ğ¢ĞĞ“Ğ** | | **~80K** | **$2.15 (~â‚½215)** |

**17 ĞºĞ½Ğ¸Ğ³:** ~$36.55 (~â‚½3,655)

---

## ğŸ¯ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ

### Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½Ğ°:
1. **Agent B + D:** GigaChat Pro (Ğ»ÑƒÑ‡ÑˆĞµ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ÑƒÑÑĞºĞ¸Ğ¹)
2. **Agent C:** GigaChat Lite (Ğ´ĞµÑˆĞµĞ²Ğ¾, Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾)

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… 7x Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ Ğ·Ğ°Ğ¿Ğ°Ğ´Ğ½Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
- âœ… Ğ›ÑƒÑ‡ÑˆĞµ Ğ´Ğ»Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ°
- âœ… Ğ ĞµĞ·Ğ¸Ğ´ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- âœ… ĞĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼ Ñ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ°Ğ¼Ğ¸

### Ğ”Ğ»Ñ quality check:
- **Agent D Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°:** Claude 3.5 Sonnet
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ´Ğ»Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ÑĞ»Ğµ GigaChat
- Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ²Ğ°Ğ¶Ğ½Ñ‹Ñ… Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹

---

## ğŸ“‹ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 1: Agent A â†’ blocks.jsonl
âš ï¸ **Agent A ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ²Ñ‹Ğ´Ğ°ĞµÑ‚ raw_text.md, Ğ½ÑƒĞ¶ĞµĞ½ blocks.jsonl**

1. **Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ blocks.jsonl Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚:**
   - [ ] ĞŸĞ°Ñ€ÑĞ¸Ñ‚ÑŒ markitdown output Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸
   - [ ] ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑÑ‚ÑŒ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ±Ğ»Ğ¾ĞºĞ¾Ğ²: heading, paragraph, table, formula, list
   - [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ metadata: page numbers, bbox (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ)
   - [ ] Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ block_id
   
2. **Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ manifest.json Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸:**
   - [ ] ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ text_density (ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ñ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼)
   - [ ] ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ garbage_ratio (Ğ¼ÑƒÑĞ¾Ñ€Ğ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹)
   - [ ] ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ repeated_lines_ratio (ĞºĞ¾Ğ»Ğ¾Ğ½Ñ‚Ğ¸Ñ‚ÑƒĞ»Ñ‹)
   - [ ] ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ table_extract_coverage
   - [ ] Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ¾Ğ±Ñ‰ĞµĞ³Ğ¾ score (0-100)
   - [ ] Routing flags: ok_for_outline / needs_repair

3. **Ğ¢ĞµÑÑ‚ Ğ½Ğ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ°Ñ…:**
   - [ ] ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ accounting-basics â†’ blocks.jsonl
   - [ ] ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ chart-of-accounts â†’ blocks.jsonl
   - [ ] ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Agent B ÑĞ¼Ğ¾Ğ¶ĞµÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 2: Agent B + GigaChat
4. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ GigaChat Pro:**
   - [ ] Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ `gigachat` SDK
   - [ ] ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ API key (https://developers.sber.ru/gigachat)
   - [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ system prompt Ğ¸Ğ· `inputs/agent.md`
   - [ ] Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ map-reduce Ğ¿Ğ¾ Ğ³Ğ»Ğ°Ğ²Ğ°Ğ¼ (chunking Ğ¿Ğ¾ heading level â‰¤2)
   - [ ] Few-shot examples (2-3 Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ° outline)
   
5. **Ğ¢ĞµÑÑ‚ Agent B:**
   - [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ accounting-basics (blocks.jsonl â†’ outline.yaml)
   - [ ] ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾: stages, tools, indicators, rules
   - [ ] Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¼ rule-based Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ¼

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 3: ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹
6. â³ **Agent C:** GigaChat Lite + templates
7. â³ **Agent D:** Claude 3.5 Sonnet Ğ´Ğ»Ñ QA
8. â³ **Agent E:** ArangoDB integration (python-arango)
9. â³ **Agent F:** GitHub API

---

## ğŸ”‘ ĞÑƒĞ¶Ğ½Ñ‹Ğµ API Keys

```bash
# .env
GIGACHAT_API_KEY=your_key_here
ANTHROPIC_API_KEY=your_claude_key  # Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Agent D
ARANGO_URL=http://localhost:8529  # Ğ¸Ğ· cleaning_finance_app
ARANGO_USERNAME=root
ARANGO_PASSWORD=your_password
GITHUB_TOKEN=your_github_token  # Ğ´Ğ»Ñ Agent F
```

ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ GigaChat API: https://developers.sber.ru/gigachat
